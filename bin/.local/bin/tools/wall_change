#!/bin/sh
## script to automate wall change and pywal updates

if [ -z $1 ]; then
  echo "Wallpaper path must be provided"
  exit 1;
fi

image_path=$(realpath "$1")
echo "Wallpaper: $image_path"
echo "Copying $image_path -> ${HOME}/config/wall.jpg"
cp $image_path ~/.config/wall.jpg

case "$XDG_SESSION_TYPE" in
  "x11")
    echo "Setting the wallpaper in i3";
    feh --bg-fill "$HOME/.config/wall.jpg"
    ;;
  "wayland") 
    echo "Setting the wallpaper in sway";
    monitors=$(/usr/bin/swaymsg -r -t get_outputs | grep name | awk '{print $2'} | sed -e 's/\"//g' -e 's/,//g');
    for i in $monitors; do /usr/bin/swaymsg output "$i" background ~/.config/wall.jpg fill; done;
    ;;
esac


