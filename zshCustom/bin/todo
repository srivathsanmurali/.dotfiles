#!/usr/bin/env bash

function __todo_init() {
  touch ~/.todo
}

function __todo_list() {
  cat -n ~/.todo
}

function __todo_add_task() {
  echo "$@" >> ~/.todo
}

function __todo_del_task() {
  local del_num=$1
  sed -i -e "${del_num}d" ~/.todo
}

function __todo_usage() {
read -d '' help <<- EOF
  usage: todo sub_command [arguments]
  Sub Commands:
    init: Initializes the todo file.
      todo init
    add: Adds a task.
      todo add task to be added
    del: Deletes a task.
      todo del task_number
    list: Lists a task.
      todo list
    help: Prints this help text.
      todo help
EOF
echo "$help"
}

function __todo_switch_commands() {
  local sub_command=$1 
  shift
  case $sub_command in
    
    init)
      __todo_init
      ;;
    list)
      __todo_list
      ;;
    add)
      __todo_add_task "$@"
      ;; 
    del)
      __todo_del_task "$1"
      ;;
    help)
      __todo_usage
      ;;
    *) 
      __todo_usage
      ;;
  esac 
}

__todo_switch_commands "$@"
