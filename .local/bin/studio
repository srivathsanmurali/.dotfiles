#!/bin/sh

[ -e ~/.config/studio.conf ] && . ~/.config/studio.conf

fifo_path="${HOME}/.cache/studio.fifo"

if [ "$1" == "play" ]
then
    if [ -e "$fifo_path" ]
    then
        echo quit > "$fifo_path"
        rm "$fifo_path"
    else
        mkfifo "$fifo_path"
        mpv --input-file="$fifo_path" --no-audio-display --quiet \
            "$STUDIO_URL/stream/stream256.opus" > /dev/null < /dev/null &
    fi
fi

if [ "$1" == "skip" ]
then
    curl -s "$STUDIO_URL/api/skip"
fi
